---
layout: post
title: Odometry issues
---

During experiments with adding a second robot to the warehouse, I encountered a very strange issue: when I was giving a goal to the second robot, AMCL was acting strange and was losing a robot location the world, and started outputting incorrect odometry. Firstly, I thought the problem was related to the namespacing, but after fixing them, the issue remained. Interestingly, after swapping robots in places, the issue swapped too: I was able to control the patrol robot fine, but the main robot started to lose in the world. 

As I have discovered later, the issue was that ```differential_drive_controller``` was outputting the wrong odometry when the robot starts its motion, not in the origin. Unfortunately, I researched and googled a lot, but was not able to find a reason for this issue. Additionally, I have removed ```AMCL``` and now instead use simply odometry from plugin, as it was not making odometry more precise.

Video showing behavior of the odometry topic can be seen here:

[![IMAGE ALT TEXT HERE](https://img.youtube.com/vi/vvPnN-XJeq8/0.jpg)](https://youtu.be/vvPnN-XJeq8)

I will keep updating this post.